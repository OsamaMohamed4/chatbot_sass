{"timestamp": 1761487938.5366554, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761487938.5396473, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761487938.5422032, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761488041.2754688, "level": "INFO", "name": "api", "message": "Incoming Request: GET /docs", "request_id": "a036b5c5-91dd-45de-bbf6-e09561e26957", "method": "GET", "path": "/docs", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761488043.3762138, "level": "INFO", "name": "api", "message": "Incoming Request: GET /api/v1/openapi.json", "request_id": "9fae70ab-6ba9-464b-8800-4df7aff4b749", "method": "GET", "path": "/api/v1/openapi.json", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761488044.6537235, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.2760s", "request_id": "9fae70ab-6ba9-464b-8800-4df7aff4b749", "method": "GET", "path": "/api/v1/openapi.json", "process_time": 1.2759802341461182, "logger": "api", "environment": "development"}
{"timestamp": 1761488301.4523876, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "8312161c-d193-47d7-8c0e-84a7f472bb31", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761488301.9915109, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488301.995854, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.0333905, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.0357702, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.0440636, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.045493, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.0566018, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.3036032, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.30787, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00545s] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488303.2066236, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE system_admins SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE system_admins.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488303.210884, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00453s] (datetime.datetime(2025, 10, 26, 14, 18, 23, 169361), 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488303.2561996, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488303.284312, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.8469s", "request_id": "8312161c-d193-47d7-8c0e-84a7f472bb31", "method": "POST", "path": "/api/v1/auth/admin/login", "process_time": 1.8469130992889404, "logger": "api", "environment": "development"}
{"timestamp": 1761488610.185507, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "33b33bd0-32b2-43e5-a8b9-86276f221cc7", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761488610.2791948, "level": "ERROR", "name": "api", "message": "Request failed: 'coroutine' object has no attribute 'get'", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 264, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 592, in solve_dependencies\n    solved = await call(**sub_values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/deps.py\", line 38, in get_current_admin\n    if token_data.get(\"user_type\") != \"admin\":\n       ^^^^^^^^^^^^^^\nAttributeError: 'coroutine' object has no attribute 'get'", "request_id": "33b33bd0-32b2-43e5-a8b9-86276f221cc7", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761489332.9516807, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761489337.0496743, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761489337.0513349, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761489337.0528214, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761489345.0668125, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "773dc0f8-979e-4b7f-881a-b52c3c27fe50", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489391.64734, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "29245efb-b163-4569-a9b1-43fc5cefc8c8", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489391.7999942, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8043964, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8394454, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8466108, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8744736, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8781755, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.9030445, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.0424955, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.0450912, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00273s] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.477258, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE system_admins SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE system_admins.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.4783502, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00120s] (datetime.datetime(2025, 10, 26, 14, 36, 32, 319752), 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.4936054, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489482.532061, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "bb38838c-0a9b-408d-82f0-7e5e66c6b627", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489619.8736236, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "c67cab34-3a4f-44d4-9cd1-5ffac61ab029", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489789.1854417, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "4209411d-8b99-4872-8c27-e8b53596da9a", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489789.5990565, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489789.790227, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489789.7991796, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.02434s] ('1',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489789.929442, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489789.9520855, "level": "ERROR", "name": "api", "message": "Request failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n[SQL: SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true]\n[parameters: ('1',)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 533, in _prepare_and_execute\n    prepared_stmt, attributes = await adapt_connection._prepare(\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 784, in _prepare\n    prepared_stmt = await self._connection.prepare(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 636, in prepare\n    return await self._prepare(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 654, in _prepare\n    stmt = await self._get_statement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 433, in _get_statement\n    statement = await self._protocol.prepare(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"asyncpg/protocol/protocol.pyx\", line 166, in prepare\nasyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 264, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 592, in solve_dependencies\n    solved = await call(**sub_values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/deps.py\", line 47, in get_current_admin\n    result = await db.execute(\n             ^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 455, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2308, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n[SQL: SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true]\n[parameters: ('1',)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "request_id": "4209411d-8b99-4872-8c27-e8b53596da9a", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761595023.8329113, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "60d1ce08-609e-4cf9-aef6-9757d8c4f88c", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595024.5195806, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.5370142, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.5493708, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 8289s ago] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.9548664, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE system_admins SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE system_admins.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.9577384, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 8289s ago] (datetime.datetime(2025, 10, 27, 19, 57, 4, 918832), 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.981949, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761598698.6752741, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.2062s", "request_id": "60d1ce08-609e-4cf9-aef6-9757d8c4f88c", "method": "POST", "path": "/api/v1/auth/admin/login", "process_time": 1.2061731815338135, "logger": "api", "environment": "development"}
{"timestamp": 1761595079.9989803, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "f5789ed9-1956-4018-9e71-a0cbf96c24d2", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595080.0392556, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595080.0478094, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595080.0542114, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 7947s ago] ('1',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595080.0971768, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595080.1068347, "level": "ERROR", "name": "api", "message": "Request failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n[SQL: SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true]\n[parameters: ('1',)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 533, in _prepare_and_execute\n    prepared_stmt, attributes = await adapt_connection._prepare(\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 784, in _prepare\n    prepared_stmt = await self._connection.prepare(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 636, in prepare\n    return await self._prepare(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 654, in _prepare\n    stmt = await self._get_statement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 433, in _get_statement\n    statement = await self._protocol.prepare(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"asyncpg/protocol/protocol.pyx\", line 166, in prepare\nasyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 264, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 592, in solve_dependencies\n    solved = await call(**sub_values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/deps.py\", line 47, in get_current_admin\n    result = await db.execute(\n             ^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 455, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2308, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n[SQL: SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true]\n[parameters: ('1',)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "request_id": "f5789ed9-1956-4018-9e71-a0cbf96c24d2", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761595364.7912788, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595374.0051513, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595374.010858, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595374.0153623, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595374.0653374, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "8cbd0072-ca85-43e7-af8c-5bd0a4c678a9", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595374.2293496, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.9223976, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.9361916, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.9405334, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.960028, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.9716887, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599048.0320084, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599048.1179442, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599048.1230078, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00526s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595374.694065, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.2299335, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "3fa5e9a4-2ca4-44a9-97b5-d46239e39f31", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595509.6310134, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.67109, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.6852767, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 135.2s ago] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.8167558, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.8206406, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00587s] ('mdarj',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.868817, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.877416, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00877s] ('mdarj@gmail.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.917174, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.9236884, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00675s] ('user@example.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.0210538, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO client_companies (company_name, company_email, contact_person, phone, address, industry, company_size, tax_id, account_status, suspension_reason, admin_id, resource_plan_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::INTEGER, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE) RETURNING client_companies.id, client_companies.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.0496256, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.03146s] ('mdarj', 'mdarj@gmail.com', '012345678', '+534079775368', 'cairo', 'alex', 'small', None, 'active', None, None, 1, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.1509652, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.1652343, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.01432s] (2,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.521414, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO company_users (username, email, password_hash, first_name, last_name, role, is_master_user, custom_permissions, last_login_at, failed_login_attempts, locked_until, password_changed_at, company_id, created_by_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::BOOLEAN, $8::JSON, $9::TIMESTAMP WITH TIME ZONE, $10::INTEGER, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::INTEGER, $14::INTEGER, $15::BOOLEAN, $16::TIMESTAMP WITH TIME ZONE) RETURNING company_users.id, company_users.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.5270793, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00685s] ('user', 'user@example.com', '$2b$12$v2.KZ77kVi94gAedUBB/sOQxYXaKuoxQuIA3jp3rNMgaObgDsUi6i', 'osama', 'mohamed', 'master', True, '{}', None, 0, None, None, 2, None, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.5442486, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.5573885, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.01374s] (2,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.5830355, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.608967, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.6224637, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.6472447, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 0.4963s ago] (2,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.7952793, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_plans.plan_name AS resource_plans_plan_name, resource_plans.plan_type AS resource_plans_plan_type, resource_plans.max_ai_models AS resource_plans_max_ai_models, resource_plans.max_users AS resource_plans_max_users, resource_plans.max_websites AS resource_plans_max_websites, resource_plans.max_monthly_requests AS resource_plans_max_monthly_requests, resource_plans.max_storage_gb AS resource_plans_max_storage_gb, resource_plans.max_training_hours AS resource_plans_max_training_hours, resource_plans.monthly_cost AS resource_plans_monthly_cost, resource_plans.yearly_cost AS resource_plans_yearly_cost, resource_plans.overage_cost_per_request AS resource_plans_overage_cost_per_request, resource_plans.overage_cost_per_gb AS resource_plans_overage_cost_per_gb, resource_plans.features AS resource_plans_features, resource_plans.id AS resource_plans_id, resource_plans.is_active AS resource_plans_is_active, resource_plans.created_at AS resource_plans_created_at, resource_plans.updated_at AS resource_plans_updated_at \nFROM resource_plans \nWHERE resource_plans.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.798709, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00356s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.816766, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_allocations.company_id AS resource_allocations_company_id, resource_allocations.plan_id AS resource_allocations_plan_id, resource_allocations.current_ai_models AS resource_allocations_current_ai_models, resource_allocations.current_users AS resource_allocations_current_users, resource_allocations.current_websites AS resource_allocations_current_websites, resource_allocations.current_monthly_requests AS resource_allocations_current_monthly_requests, resource_allocations.current_storage_gb AS resource_allocations_current_storage_gb, resource_allocations.billing_period_start AS resource_allocations_billing_period_start, resource_allocations.billing_period_end AS resource_allocations_billing_period_end, resource_allocations.overage_requests AS resource_allocations_overage_requests, resource_allocations.overage_storage_gb AS resource_allocations_overage_storage_gb, resource_allocations.id AS resource_allocations_id, resource_allocations.is_active AS resource_allocations_is_active, resource_allocations.created_at AS resource_allocations_created_at, resource_allocations.updated_at AS resource_allocations_updated_at \nFROM resource_allocations \nWHERE $1::INTEGER = resource_allocations.company_id", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.8334122, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.01670s] (2,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.8521583, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.8744001, "level": "ERROR", "name": "api", "message": "Request failed: 2 validation errors for CompanyResponse\nresource_plan\n  Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) [type=get_attribute_error, input_value=<app.models.client_compan...bject at 0x7cdd7cb94c10>, input_type=ClientCompany]\n    For further information visit https://errors.pydantic.dev/2.11/v/get_attribute_error\nresource_allocation\n  Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) [type=get_attribute_error, input_value=<app.models.client_compan...bject at 0x7cdd7cb94c10>, input_type=ClientCompany]\n    For further information visit https://errors.pydantic.dev/2.11/v/get_attribute_error", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/companies.py\", line 46, in create_company\n    data=CompanyResponse.model_validate(company),\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/pydantic/main.py\", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 2 validation errors for CompanyResponse\nresource_plan\n  Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) [type=get_attribute_error, input_value=<app.models.client_compan...bject at 0x7cdd7cb94c10>, input_type=ClientCompany]\n    For further information visit https://errors.pydantic.dev/2.11/v/get_attribute_error\nresource_allocation\n  Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) [type=get_attribute_error, input_value=<app.models.client_compan...bject at 0x7cdd7cb94c10>, input_type=ClientCompany]\n    For further information visit https://errors.pydantic.dev/2.11/v/get_attribute_error", "request_id": "3fa5e9a4-2ca4-44a9-97b5-d46239e39f31", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761595770.3525856, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595775.6944356, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595775.6964922, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595775.6987264, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595869.10121, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595873.3504171, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595873.3529327, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595873.355094, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595886.6537108, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "5c20e643-e360-47c9-981d-fd1f5268c4eb", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595886.8691823, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.8717544, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.8860025, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.8890166, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9097805, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9169128, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9247575, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9927294, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9960046, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00338s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595887.1020458, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595887.1050677, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00310s] ('mdarj',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595887.1286635, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595887.1385984, "level": "ERROR", "name": "api", "message": "Request failed: Company with name 'mdarj' already exists", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/companies.py\", line 44, in create_company\n    company = await service.create_company(company_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/company_service.py\", line 31, in create_company\n    raise DuplicateResourceException(\napp.exceptions.base_exception.DuplicateResourceException: Company with name 'mdarj' already exists", "request_id": "5c20e643-e360-47c9-981d-fd1f5268c4eb", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761595996.9295132, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "21943bc0-83d3-4adf-be80-f00f81412400", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595997.249336, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.3093975, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.3340135, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 110.4s ago] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.4517906, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.4591384, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 110.4s ago] ('mdarj2',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.498847, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.505711, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00768s] ('mdarj@gmail.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.5336704, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.5596046, "level": "ERROR", "name": "api", "message": "Request failed: Company with email 'mdarj@gmail.com' already exists", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/companies.py\", line 44, in create_company\n    company = await service.create_company(company_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/company_service.py\", line 40, in create_company\n    raise DuplicateResourceException(\napp.exceptions.base_exception.DuplicateResourceException: Company with email 'mdarj@gmail.com' already exists", "request_id": "21943bc0-83d3-4adf-be80-f00f81412400", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761596065.7816992, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "c845a5cb-f7a2-457c-bf9e-722b2e0377a1", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761596065.9024136, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596065.922443, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596065.930891, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 178.9s ago] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.0264046, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.0314677, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 178.9s ago] ('mdarj2',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.0401888, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.0464385, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 68.55s ago] ('mdarj2@gmail.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.1316323, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.1362448, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00527s] ('osama@gmail.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.3083868, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO client_companies (company_name, company_email, contact_person, phone, address, industry, company_size, tax_id, account_status, suspension_reason, admin_id, resource_plan_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::INTEGER, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE) RETURNING client_companies.id, client_companies.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.311863, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00702s] ('mdarj2', 'mdarj2@gmail.com', '0123456788', '+5340797753688', 'cairo1', 'alex1', 'small', None, 'active', None, None, 1, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.4073083, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.4104056, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00326s] (3,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.8188767, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO company_users (username, email, password_hash, first_name, last_name, role, is_master_user, custom_permissions, last_login_at, failed_login_attempts, locked_until, password_changed_at, company_id, created_by_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::BOOLEAN, $8::JSON, $9::TIMESTAMP WITH TIME ZONE, $10::INTEGER, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::INTEGER, $14::INTEGER, $15::BOOLEAN, $16::TIMESTAMP WITH TIME ZONE) RETURNING company_users.id, company_users.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.8255525, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00924s] ('osama', 'osama@gmail.com', '$2b$12$QcDwUIM4QLinvrc03G2VteKmWHjjTepBWV14qWeN27Zticm8PXLLW', 'osama1', 'mohamed1', 'master', True, '{}', None, 0, None, None, 3, None, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.854292, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.8616781, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00747s] (3,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.8829226, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.9151723, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.9226618, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.9311423, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 0.524s ago] (3,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596067.0336616, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.2489s", "request_id": "c845a5cb-f7a2-457c-bf9e-722b2e0377a1", "method": "POST", "path": "/api/v1/companies", "process_time": 1.2489111423492432, "logger": "api", "environment": "development"}
{"timestamp": 1761596067.04186, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761666232.6914508, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
