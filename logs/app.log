{"timestamp": 1761487938.5366554, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761487938.5396473, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761487938.5422032, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761488041.2754688, "level": "INFO", "name": "api", "message": "Incoming Request: GET /docs", "request_id": "a036b5c5-91dd-45de-bbf6-e09561e26957", "method": "GET", "path": "/docs", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761488043.3762138, "level": "INFO", "name": "api", "message": "Incoming Request: GET /api/v1/openapi.json", "request_id": "9fae70ab-6ba9-464b-8800-4df7aff4b749", "method": "GET", "path": "/api/v1/openapi.json", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761488044.6537235, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.2760s", "request_id": "9fae70ab-6ba9-464b-8800-4df7aff4b749", "method": "GET", "path": "/api/v1/openapi.json", "process_time": 1.2759802341461182, "logger": "api", "environment": "development"}
{"timestamp": 1761488301.4523876, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "8312161c-d193-47d7-8c0e-84a7f472bb31", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761488301.9915109, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488301.995854, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.0333905, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.0357702, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.0440636, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.045493, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.0566018, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.3036032, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488302.30787, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00545s] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488303.2066236, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE system_admins SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE system_admins.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488303.210884, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00453s] (datetime.datetime(2025, 10, 26, 14, 18, 23, 169361), 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488303.2561996, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761488303.284312, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.8469s", "request_id": "8312161c-d193-47d7-8c0e-84a7f472bb31", "method": "POST", "path": "/api/v1/auth/admin/login", "process_time": 1.8469130992889404, "logger": "api", "environment": "development"}
{"timestamp": 1761488610.185507, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "33b33bd0-32b2-43e5-a8b9-86276f221cc7", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761488610.2791948, "level": "ERROR", "name": "api", "message": "Request failed: 'coroutine' object has no attribute 'get'", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 264, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 592, in solve_dependencies\n    solved = await call(**sub_values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/deps.py\", line 38, in get_current_admin\n    if token_data.get(\"user_type\") != \"admin\":\n       ^^^^^^^^^^^^^^\nAttributeError: 'coroutine' object has no attribute 'get'", "request_id": "33b33bd0-32b2-43e5-a8b9-86276f221cc7", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761489332.9516807, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761489337.0496743, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761489337.0513349, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761489337.0528214, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761489345.0668125, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "773dc0f8-979e-4b7f-881a-b52c3c27fe50", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489391.64734, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "29245efb-b163-4569-a9b1-43fc5cefc8c8", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489391.7999942, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8043964, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8394454, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8466108, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8744736, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.8781755, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489391.9030445, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.0424955, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.0450912, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00273s] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.477258, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE system_admins SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE system_admins.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.4783502, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00120s] (datetime.datetime(2025, 10, 26, 14, 36, 32, 319752), 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489392.4936054, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489482.532061, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "bb38838c-0a9b-408d-82f0-7e5e66c6b627", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489619.8736236, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "c67cab34-3a4f-44d4-9cd1-5ffac61ab029", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489789.1854417, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "4209411d-8b99-4872-8c27-e8b53596da9a", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761489789.5990565, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489789.790227, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489789.7991796, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.02434s] ('1',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489789.929442, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761489789.9520855, "level": "ERROR", "name": "api", "message": "Request failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n[SQL: SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true]\n[parameters: ('1',)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 533, in _prepare_and_execute\n    prepared_stmt, attributes = await adapt_connection._prepare(\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 784, in _prepare\n    prepared_stmt = await self._connection.prepare(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 636, in prepare\n    return await self._prepare(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 654, in _prepare\n    stmt = await self._get_statement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 433, in _get_statement\n    statement = await self._protocol.prepare(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"asyncpg/protocol/protocol.pyx\", line 166, in prepare\nasyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 264, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 592, in solve_dependencies\n    solved = await call(**sub_values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/deps.py\", line 47, in get_current_admin\n    result = await db.execute(\n             ^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 455, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2308, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n[SQL: SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true]\n[parameters: ('1',)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "request_id": "4209411d-8b99-4872-8c27-e8b53596da9a", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761595023.8329113, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "60d1ce08-609e-4cf9-aef6-9757d8c4f88c", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595024.5195806, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.5370142, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.5493708, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 8289s ago] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.9548664, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE system_admins SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE system_admins.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.9577384, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 8289s ago] (datetime.datetime(2025, 10, 27, 19, 57, 4, 918832), 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595024.981949, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761598698.6752741, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.2062s", "request_id": "60d1ce08-609e-4cf9-aef6-9757d8c4f88c", "method": "POST", "path": "/api/v1/auth/admin/login", "process_time": 1.2061731815338135, "logger": "api", "environment": "development"}
{"timestamp": 1761595079.9989803, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "f5789ed9-1956-4018-9e71-a0cbf96c24d2", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595080.0392556, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595080.0478094, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595080.0542114, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 7947s ago] ('1',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595080.0971768, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595080.1068347, "level": "ERROR", "name": "api", "message": "Request failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n[SQL: SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true]\n[parameters: ('1',)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 533, in _prepare_and_execute\n    prepared_stmt, attributes = await adapt_connection._prepare(\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 784, in _prepare\n    prepared_stmt = await self._connection.prepare(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 636, in prepare\n    return await self._prepare(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 654, in _prepare\n    stmt = await self._get_statement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/connection.py\", line 433, in _get_statement\n    statement = await self._protocol.prepare(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"asyncpg/protocol/protocol.pyx\", line 166, in prepare\nasyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 264, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 592, in solve_dependencies\n    solved = await call(**sub_values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/deps.py\", line 47, in get_current_admin\n    result = await db.execute(\n             ^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 455, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2308, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n[SQL: SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::VARCHAR AND system_admins.is_active = true]\n[parameters: ('1',)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "request_id": "f5789ed9-1956-4018-9e71-a0cbf96c24d2", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761595364.7912788, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595374.0051513, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595374.010858, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595374.0153623, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595374.0653374, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "8cbd0072-ca85-43e7-af8c-5bd0a4c678a9", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595374.2293496, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.9223976, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.9361916, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.9405334, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.960028, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599047.9716887, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599048.0320084, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599048.1179442, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761599048.1230078, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00526s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595374.694065, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.2299335, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "3fa5e9a4-2ca4-44a9-97b5-d46239e39f31", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595509.6310134, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.67109, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.6852767, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 135.2s ago] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.8167558, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.8206406, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00587s] ('mdarj',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.868817, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.877416, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00877s] ('mdarj@gmail.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.917174, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595509.9236884, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00675s] ('user@example.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.0210538, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO client_companies (company_name, company_email, contact_person, phone, address, industry, company_size, tax_id, account_status, suspension_reason, admin_id, resource_plan_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::INTEGER, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE) RETURNING client_companies.id, client_companies.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.0496256, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.03146s] ('mdarj', 'mdarj@gmail.com', '012345678', '+534079775368', 'cairo', 'alex', 'small', None, 'active', None, None, 1, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.1509652, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.1652343, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.01432s] (2,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.521414, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO company_users (username, email, password_hash, first_name, last_name, role, is_master_user, custom_permissions, last_login_at, failed_login_attempts, locked_until, password_changed_at, company_id, created_by_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::BOOLEAN, $8::JSON, $9::TIMESTAMP WITH TIME ZONE, $10::INTEGER, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::INTEGER, $14::INTEGER, $15::BOOLEAN, $16::TIMESTAMP WITH TIME ZONE) RETURNING company_users.id, company_users.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.5270793, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00685s] ('user', 'user@example.com', '$2b$12$v2.KZ77kVi94gAedUBB/sOQxYXaKuoxQuIA3jp3rNMgaObgDsUi6i', 'osama', 'mohamed', 'master', True, '{}', None, 0, None, None, 2, None, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.5442486, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.5573885, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.01374s] (2,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.5830355, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.608967, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.6224637, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.6472447, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 0.4963s ago] (2,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.7952793, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_plans.plan_name AS resource_plans_plan_name, resource_plans.plan_type AS resource_plans_plan_type, resource_plans.max_ai_models AS resource_plans_max_ai_models, resource_plans.max_users AS resource_plans_max_users, resource_plans.max_websites AS resource_plans_max_websites, resource_plans.max_monthly_requests AS resource_plans_max_monthly_requests, resource_plans.max_storage_gb AS resource_plans_max_storage_gb, resource_plans.max_training_hours AS resource_plans_max_training_hours, resource_plans.monthly_cost AS resource_plans_monthly_cost, resource_plans.yearly_cost AS resource_plans_yearly_cost, resource_plans.overage_cost_per_request AS resource_plans_overage_cost_per_request, resource_plans.overage_cost_per_gb AS resource_plans_overage_cost_per_gb, resource_plans.features AS resource_plans_features, resource_plans.id AS resource_plans_id, resource_plans.is_active AS resource_plans_is_active, resource_plans.created_at AS resource_plans_created_at, resource_plans.updated_at AS resource_plans_updated_at \nFROM resource_plans \nWHERE resource_plans.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.798709, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00356s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.816766, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_allocations.company_id AS resource_allocations_company_id, resource_allocations.plan_id AS resource_allocations_plan_id, resource_allocations.current_ai_models AS resource_allocations_current_ai_models, resource_allocations.current_users AS resource_allocations_current_users, resource_allocations.current_websites AS resource_allocations_current_websites, resource_allocations.current_monthly_requests AS resource_allocations_current_monthly_requests, resource_allocations.current_storage_gb AS resource_allocations_current_storage_gb, resource_allocations.billing_period_start AS resource_allocations_billing_period_start, resource_allocations.billing_period_end AS resource_allocations_billing_period_end, resource_allocations.overage_requests AS resource_allocations_overage_requests, resource_allocations.overage_storage_gb AS resource_allocations_overage_storage_gb, resource_allocations.id AS resource_allocations_id, resource_allocations.is_active AS resource_allocations_is_active, resource_allocations.created_at AS resource_allocations_created_at, resource_allocations.updated_at AS resource_allocations_updated_at \nFROM resource_allocations \nWHERE $1::INTEGER = resource_allocations.company_id", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.8334122, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.01670s] (2,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.8521583, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595510.8744001, "level": "ERROR", "name": "api", "message": "Request failed: 2 validation errors for CompanyResponse\nresource_plan\n  Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) [type=get_attribute_error, input_value=<app.models.client_compan...bject at 0x7cdd7cb94c10>, input_type=ClientCompany]\n    For further information visit https://errors.pydantic.dev/2.11/v/get_attribute_error\nresource_allocation\n  Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) [type=get_attribute_error, input_value=<app.models.client_compan...bject at 0x7cdd7cb94c10>, input_type=ClientCompany]\n    For further information visit https://errors.pydantic.dev/2.11/v/get_attribute_error", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/companies.py\", line 46, in create_company\n    data=CompanyResponse.model_validate(company),\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/pydantic/main.py\", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 2 validation errors for CompanyResponse\nresource_plan\n  Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) [type=get_attribute_error, input_value=<app.models.client_compan...bject at 0x7cdd7cb94c10>, input_type=ClientCompany]\n    For further information visit https://errors.pydantic.dev/2.11/v/get_attribute_error\nresource_allocation\n  Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) [type=get_attribute_error, input_value=<app.models.client_compan...bject at 0x7cdd7cb94c10>, input_type=ClientCompany]\n    For further information visit https://errors.pydantic.dev/2.11/v/get_attribute_error", "request_id": "3fa5e9a4-2ca4-44a9-97b5-d46239e39f31", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761595770.3525856, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595775.6944356, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595775.6964922, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595775.6987264, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595869.10121, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595873.3504171, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595873.3529327, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595873.355094, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761595886.6537108, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "5c20e643-e360-47c9-981d-fd1f5268c4eb", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595886.8691823, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.8717544, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.8860025, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.8890166, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9097805, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9169128, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9247575, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9927294, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595886.9960046, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00338s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595887.1020458, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595887.1050677, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00310s] ('mdarj',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595887.1286635, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595887.1385984, "level": "ERROR", "name": "api", "message": "Request failed: Company with name 'mdarj' already exists", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/companies.py\", line 44, in create_company\n    company = await service.create_company(company_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/company_service.py\", line 31, in create_company\n    raise DuplicateResourceException(\napp.exceptions.base_exception.DuplicateResourceException: Company with name 'mdarj' already exists", "request_id": "5c20e643-e360-47c9-981d-fd1f5268c4eb", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761595996.9295132, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "21943bc0-83d3-4adf-be80-f00f81412400", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761595997.249336, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.3093975, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.3340135, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 110.4s ago] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.4517906, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.4591384, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 110.4s ago] ('mdarj2',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.498847, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.505711, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00768s] ('mdarj@gmail.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.5336704, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761595997.5596046, "level": "ERROR", "name": "api", "message": "Request failed: Company with email 'mdarj@gmail.com' already exists", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/companies.py\", line 44, in create_company\n    company = await service.create_company(company_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/company_service.py\", line 40, in create_company\n    raise DuplicateResourceException(\napp.exceptions.base_exception.DuplicateResourceException: Company with email 'mdarj@gmail.com' already exists", "request_id": "21943bc0-83d3-4adf-be80-f00f81412400", "method": "POST", "path": "/api/v1/companies", "logger": "api", "environment": "development"}
{"timestamp": 1761596065.7816992, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "c845a5cb-f7a2-457c-bf9e-722b2e0377a1", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761596065.9024136, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596065.922443, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596065.930891, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 178.9s ago] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.0264046, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.0314677, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 178.9s ago] ('mdarj2',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.0401888, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.0464385, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 68.55s ago] ('mdarj2@gmail.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.1316323, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.1362448, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00527s] ('osama@gmail.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.3083868, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO client_companies (company_name, company_email, contact_person, phone, address, industry, company_size, tax_id, account_status, suspension_reason, admin_id, resource_plan_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::INTEGER, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE) RETURNING client_companies.id, client_companies.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.311863, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00702s] ('mdarj2', 'mdarj2@gmail.com', '0123456788', '+5340797753688', 'cairo1', 'alex1', 'small', None, 'active', None, None, 1, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.4073083, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.4104056, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00326s] (3,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.8188767, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO company_users (username, email, password_hash, first_name, last_name, role, is_master_user, custom_permissions, last_login_at, failed_login_attempts, locked_until, password_changed_at, company_id, created_by_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::BOOLEAN, $8::JSON, $9::TIMESTAMP WITH TIME ZONE, $10::INTEGER, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::INTEGER, $14::INTEGER, $15::BOOLEAN, $16::TIMESTAMP WITH TIME ZONE) RETURNING company_users.id, company_users.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.8255525, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00924s] ('osama', 'osama@gmail.com', '$2b$12$QcDwUIM4QLinvrc03G2VteKmWHjjTepBWV14qWeN27Zticm8PXLLW', 'osama1', 'mohamed1', 'master', True, '{}', None, 0, None, None, 3, None, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.854292, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.8616781, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00747s] (3,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.8829226, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.9151723, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.9226618, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596066.9311423, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 0.524s ago] (3,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761596067.0336616, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.2489s", "request_id": "c845a5cb-f7a2-457c-bf9e-722b2e0377a1", "method": "POST", "path": "/api/v1/companies", "process_time": 1.2489111423492432, "logger": "api", "environment": "development"}
{"timestamp": 1761596067.04186, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761666232.6914508, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761685334.3238292, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761685334.3261824, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761685334.3276534, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761689071.6298199, "level": "INFO", "name": "api", "message": "Incoming Request: GET /docs", "request_id": "b1c2c3d4-3732-4c97-a93a-7a6198655beb", "method": "GET", "path": "/docs", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761685550.5719903, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "caf079d9-1857-4ffd-81bc-e200c4d8fc3e", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761685551.0180292, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.0221732, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.054326, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.0566294, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.0706115, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.0723827, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.0926335, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.7399054, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.7419782, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00234s] ('SuperAdmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.7656097, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685551.770308, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.2013s", "request_id": "caf079d9-1857-4ffd-81bc-e200c4d8fc3e", "method": "POST", "path": "/api/v1/auth/admin/login", "process_time": 1.201324462890625, "logger": "api", "environment": "development"}
{"timestamp": 1761685564.079342, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "e565268f-6e5f-4366-898d-230d85cfe5db", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761685564.1006181, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685564.115007, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685564.1214259, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 12.5s ago] ('Super',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685564.1435535, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761689308.7384295, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/admin/login", "request_id": "de47ca48-1e45-40c8-9739-afa8e062caf2", "method": "POST", "path": "/api/v1/auth/admin/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761689308.869563, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761689308.8719056, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.username = $1::VARCHAR AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761689308.8734877, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 81.67s ago] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685632.8828933, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE system_admins SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE system_admins.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685632.8845906, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00218s] (datetime.datetime(2025, 10, 28, 21, 7, 12, 867722), 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685632.9023874, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.2830534, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/companies", "request_id": "87f9ae2e-e59b-4703-b1ff-1d80b28526a9", "method": "POST", "path": "/api/v1/companies", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761685995.5088184, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.5595033, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT system_admins.username, system_admins.email, system_admins.password_hash, system_admins.first_name, system_admins.last_name, system_admins.is_superuser, system_admins.last_login_at, system_admins.failed_login_attempts, system_admins.locked_until, system_admins.two_factor_enabled, system_admins.two_factor_secret, system_admins.id, system_admins.is_active, system_admins.created_at, system_admins.updated_at \nFROM system_admins \nWHERE system_admins.id = $1::INTEGER AND system_admins.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.563145, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00633s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.7921116, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_name = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.7939317, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00266s] ('asset',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.8394973, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.company_email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.8458357, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00634s] ('moo@example.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.8864763, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.email = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.8883822, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00184s] ('ahmed@example.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.965557, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO client_companies (company_name, company_email, contact_person, phone, address, industry, company_size, tax_id, account_status, suspension_reason, admin_id, resource_plan_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::INTEGER, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE) RETURNING client_companies.id, client_companies.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685995.9681585, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00443s] ('asset', 'moo@example.com', 'ahaa', '+234567890', 'cairo', 'alex', 'medium', None, 'active', None, None, 1, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.0363882, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.0391812, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00305s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.2946641, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO company_users (username, email, password_hash, first_name, last_name, role, is_master_user, custom_permissions, last_login_at, failed_login_attempts, locked_until, password_changed_at, company_id, created_by_id, is_active, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::BOOLEAN, $8::JSON, $9::TIMESTAMP WITH TIME ZONE, $10::INTEGER, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::INTEGER, $14::INTEGER, $15::BOOLEAN, $16::TIMESTAMP WITH TIME ZONE) RETURNING company_users.id, company_users.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.2971454, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00708s] ('ahmed', 'ahmed@example.com', '$2b$12$Jmzx8iPjGps6zhCZgvv10OqZnGB2RbYEU2tV3gK4iUK4tQLYh0/nG', 'ahmed', 'mohamed', 'master', True, '{}', None, 0, None, None, 4, None, True, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.3177688, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.3220685, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00448s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.330709, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.3531866, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.3590062, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.3629022, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 0.3267s ago] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761685996.4213462, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.1514s", "request_id": "87f9ae2e-e59b-4703-b1ff-1d80b28526a9", "method": "POST", "path": "/api/v1/companies", "process_time": 1.1514456272125244, "logger": "api", "environment": "development"}
{"timestamp": 1761685996.4263165, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761689729.1555076, "level": "INFO", "name": "api", "message": "Incoming Request: GET /api/v1/companies", "request_id": "afbc7542-67f9-47f0-9cd3-e97792f3c3c3", "method": "GET", "path": "/api/v1/companies", "query_params": "page=1&page_size=10", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761686220.0197937, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761686224.5821626, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761686224.5855818, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761686224.5872648, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761686276.8026454, "level": "INFO", "name": "api", "message": "Incoming Request: GET /health", "request_id": "c40bd3eb-2464-4f21-826b-b981220b48ca", "method": "GET", "path": "/health", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761686295.7687688, "level": "INFO", "name": "api", "message": "Incoming Request: GET /", "request_id": "3cdbdacb-98ab-4870-83a1-d7b84b9ab28f", "method": "GET", "path": "/", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761687048.5938041, "level": "INFO", "name": "api", "message": "Incoming Request: GET /docs", "request_id": "7a65101e-f610-428c-ac55-0165cd4e0318", "method": "GET", "path": "/docs", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761687049.0252876, "level": "INFO", "name": "api", "message": "Incoming Request: GET /api/v1/openapi.json", "request_id": "7ee06360-7b11-477b-b0ed-96ec2de00fb0", "method": "GET", "path": "/api/v1/openapi.json", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761690725.6000876, "level": "WARNING", "name": "api", "message": "Slow request detected: 3676.5743s", "request_id": "7ee06360-7b11-477b-b0ed-96ec2de00fb0", "method": "GET", "path": "/api/v1/openapi.json", "process_time": 3676.574282884598, "logger": "api", "environment": "development"}
{"timestamp": 1761687729.357488, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "1250b2e0-09a6-4217-ad0b-f8bfed00eec9", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761687729.798607, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687729.803163, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687729.8291385, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687729.8315732, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687729.8394923, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687729.8424037, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687729.8524046, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687730.0256615, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687730.027835, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00310s] ('ahmed',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687730.3601763, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE company_users.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687730.361541, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00149s] (datetime.datetime(2025, 10, 28, 21, 42, 10, 348415), 4)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687730.3831928, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687730.3983095, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.0488s", "request_id": "1250b2e0-09a6-4217-ad0b-f8bfed00eec9", "method": "POST", "path": "/api/v1/auth/company/login", "process_time": 1.0487878322601318, "logger": "api", "environment": "development"}
{"timestamp": 1761687825.17869, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "d9029203-204c-4785-a54f-911e853e2a38", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761687825.201963, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687825.2080503, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687825.2102535, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00267s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687825.2443337, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687918.6140404, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "e9346ea6-7bb3-40ce-a27d-6c96d3fa50fb", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761687918.7381845, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687918.7498164, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687918.754478, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 93.71s ago] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687918.7866344, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687978.3717735, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "b94642b6-0f2d-4140-9359-bacf8d2eaf05", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761687978.4315338, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687978.435829, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687978.439565, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 248.8s ago] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761687978.4530132, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761691691.2298434, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "604d7f93-95cb-4224-924b-50b613622134", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761691691.4113386, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761691691.4128122, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761691691.4136715, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 286s ago] ('adminsuper',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761691691.4391494, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688098.611298, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "2b207874-d6df-4df9-908b-5eb1aefd00a7", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761688098.6294878, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688098.6368597, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688098.6395185, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 369.4s ago] ('superadmin',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688098.649324, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761691997.929794, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "403caec9-9dac-4741-898e-c085c14b58cf", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761688322.5479167, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688322.5608032, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688322.5635912, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 592.6s ago] ('ahmed',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688322.9062395, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE company_users.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688322.9074004, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 592.6s ago] (datetime.datetime(2025, 10, 28, 21, 52, 2, 883467), 4)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688322.9289527, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688393.815877, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "92dffdcb-e018-41ce-b566-bcb96f141653", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761688393.8577452, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688393.870042, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688393.8766384, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 570.5s ago] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688394.0296319, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688394.031237, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00245s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688394.092375, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_plans.id AS resource_plans_id, resource_plans.plan_name AS resource_plans_plan_name, resource_plans.plan_type AS resource_plans_plan_type, resource_plans.max_ai_models AS resource_plans_max_ai_models, resource_plans.max_users AS resource_plans_max_users, resource_plans.max_websites AS resource_plans_max_websites, resource_plans.max_monthly_requests AS resource_plans_max_monthly_requests, resource_plans.max_storage_gb AS resource_plans_max_storage_gb, resource_plans.max_training_hours AS resource_plans_max_training_hours, resource_plans.monthly_cost AS resource_plans_monthly_cost, resource_plans.yearly_cost AS resource_plans_yearly_cost, resource_plans.overage_cost_per_request AS resource_plans_overage_cost_per_request, resource_plans.overage_cost_per_gb AS resource_plans_overage_cost_per_gb, resource_plans.features AS resource_plans_features, resource_plans.is_active AS resource_plans_is_active, resource_plans.created_at AS resource_plans_created_at, resource_plans.updated_at AS resource_plans_updated_at \nFROM resource_plans \nWHERE resource_plans.id IN ($1::INTEGER)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688394.0938485, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00250s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688394.1606882, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT count(*) AS count_1 \nFROM websites \nWHERE websites.company_id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688394.1618118, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00121s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688394.181614, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761688394.1879082, "level": "ERROR", "name": "api", "message": "Request failed: 'widget_position' is an invalid keyword argument for Website", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 59, in create\n    db_obj = self.model(**obj_in)\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'widget_position' is an invalid keyword argument for Website", "request_id": "92dffdcb-e018-41ce-b566-bcb96f141653", "method": "POST", "path": "/api/v1/websites", "logger": "api", "environment": "development"}
{"timestamp": 1761688394.3306513, "level": "ERROR", "name": "app.middleware.error_handler", "message": "Unhandled Exception: 'widget_position' is an invalid keyword argument for Website", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 132, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 59, in create\n    db_obj = self.model(**obj_in)\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'widget_position' is an invalid keyword argument for Website", "path": "/api/v1/websites", "exception_type": "TypeError", "logger": "app.middleware.error_handler", "environment": "development"}
{"timestamp": 1761744542.2316058, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761744612.7470622, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761744612.7522438, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761744612.7576666, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761744628.5725133, "level": "INFO", "name": "api", "message": "Incoming Request: GET /docs", "request_id": "be8e088b-43cb-4d7f-8ebe-914d9f146dd0", "method": "GET", "path": "/docs", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744629.0512407, "level": "INFO", "name": "api", "message": "Incoming Request: GET /api/v1/openapi.json", "request_id": "0059c8c1-2f38-484f-85c9-4cd161063530", "method": "GET", "path": "/api/v1/openapi.json", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744666.9366288, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "13e5daf4-034f-4f58-971f-351c47c77689", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744667.229934, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.2338858, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.263687, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.273085, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.288668, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.3162537, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.3361905, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.4745886, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.4814003, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00697s] ('ahmed ',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744667.5305638, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744741.1359293, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "1dacc8d1-a1a1-48f1-b593-cbeec26e790f", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744741.281894, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744741.315904, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744741.3355687, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 73.85s ago] ('ahmed ',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744741.3578193, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744765.029315, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "53175239-ae6b-4a8a-b732-4aaa8c3a885c", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744765.046457, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744765.0621028, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744765.0760705, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 97.56s ago] ('osama',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744765.4541454, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET failed_login_attempts=$1::INTEGER, updated_at=now() WHERE company_users.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744765.457025, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00378s] (1, 3)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744765.493223, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744788.4727712, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "3f3546e5-66ad-4cb9-8b1f-db3d74db2c73", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744788.4810646, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744788.4843786, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744788.4864948, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 121s ago] ('ahmed',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744788.7253644, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET failed_login_attempts=$1::INTEGER, updated_at=now() WHERE company_users.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744788.7273006, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 23.26s ago] (1, 4)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744788.7314084, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744845.9015398, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "952d0035-95de-4907-bd22-350dbdadaba8", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744845.9125438, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744845.9143705, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744845.9159126, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 178.5s ago] ('ahmed',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744846.1826882, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET failed_login_attempts=$1::INTEGER, updated_at=now() WHERE company_users.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744846.1843395, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 80.77s ago] (2, 4)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744846.1875784, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744860.670552, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "7917ec53-4d8c-4dff-82c0-b4d4bb1caeb5", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744860.6792245, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744860.7257912, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744860.7295492, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 193.2s ago] ('ahmed',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744860.9711778, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET failed_login_attempts=$1::INTEGER, updated_at=now() WHERE company_users.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744860.9725463, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 95.5s ago] (3, 4)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744860.9774477, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744872.254113, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "a1fa72c6-1ccc-42fc-ad48-686e265d2504", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744872.2666907, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744872.2712126, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744872.2745888, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 204.8s ago] ('ahmed',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744872.600164, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, failed_login_attempts=$2::INTEGER, updated_at=now() WHERE company_users.id = $3::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744872.6019058, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00188s] (datetime.datetime(2025, 10, 29, 13, 34, 32, 597371), 0, 4)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744872.6093729, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.7784693, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "7ad16190-bd69-46b9-98f8-0d4ec1208721", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761744947.8250527, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.8428168, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.846323, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00409s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.922373, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.924605, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00234s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.9569795, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_plans.id AS resource_plans_id, resource_plans.plan_name AS resource_plans_plan_name, resource_plans.plan_type AS resource_plans_plan_type, resource_plans.max_ai_models AS resource_plans_max_ai_models, resource_plans.max_users AS resource_plans_max_users, resource_plans.max_websites AS resource_plans_max_websites, resource_plans.max_monthly_requests AS resource_plans_max_monthly_requests, resource_plans.max_storage_gb AS resource_plans_max_storage_gb, resource_plans.max_training_hours AS resource_plans_max_training_hours, resource_plans.monthly_cost AS resource_plans_monthly_cost, resource_plans.yearly_cost AS resource_plans_yearly_cost, resource_plans.overage_cost_per_request AS resource_plans_overage_cost_per_request, resource_plans.overage_cost_per_gb AS resource_plans_overage_cost_per_gb, resource_plans.features AS resource_plans_features, resource_plans.is_active AS resource_plans_is_active, resource_plans.created_at AS resource_plans_created_at, resource_plans.updated_at AS resource_plans_updated_at \nFROM resource_plans \nWHERE resource_plans.id IN ($1::INTEGER)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.960281, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00439s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.9891992, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT count(*) AS count_1 \nFROM websites \nWHERE websites.company_id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744947.9929957, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00385s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744948.0236442, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761744948.0306711, "level": "ERROR", "name": "api", "message": "Request failed: 'widget_position' is an invalid keyword argument for Website", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 59, in create\n    db_obj = self.model(**obj_in)\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'widget_position' is an invalid keyword argument for Website", "request_id": "7ad16190-bd69-46b9-98f8-0d4ec1208721", "method": "POST", "path": "/api/v1/websites", "logger": "api", "environment": "development"}
{"timestamp": 1761744948.3329208, "level": "ERROR", "name": "app.middleware.error_handler", "message": "Unhandled Exception: 'widget_position' is an invalid keyword argument for Website", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 132, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 59, in create\n    db_obj = self.model(**obj_in)\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'widget_position' is an invalid keyword argument for Website", "path": "/api/v1/websites", "exception_type": "TypeError", "logger": "app.middleware.error_handler", "environment": "development"}
{"timestamp": 1761745156.034576, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745160.0130458, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745160.0161564, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745160.0190227, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745161.69508, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "a075a5b2-6e80-4eca-a2bf-fdc3d44252e4", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761745161.863717, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745161.867112, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745161.8828776, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745161.8867824, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745161.8995624, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745161.9030156, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745161.9131145, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.0391128, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.0416543, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00261s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.0772521, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.0793233, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00214s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.0945356, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_plans.id AS resource_plans_id, resource_plans.plan_name AS resource_plans_plan_name, resource_plans.plan_type AS resource_plans_plan_type, resource_plans.max_ai_models AS resource_plans_max_ai_models, resource_plans.max_users AS resource_plans_max_users, resource_plans.max_websites AS resource_plans_max_websites, resource_plans.max_monthly_requests AS resource_plans_max_monthly_requests, resource_plans.max_storage_gb AS resource_plans_max_storage_gb, resource_plans.max_training_hours AS resource_plans_max_training_hours, resource_plans.monthly_cost AS resource_plans_monthly_cost, resource_plans.yearly_cost AS resource_plans_yearly_cost, resource_plans.overage_cost_per_request AS resource_plans_overage_cost_per_request, resource_plans.overage_cost_per_gb AS resource_plans_overage_cost_per_gb, resource_plans.features AS resource_plans_features, resource_plans.is_active AS resource_plans_is_active, resource_plans.created_at AS resource_plans_created_at, resource_plans.updated_at AS resource_plans_updated_at \nFROM resource_plans \nWHERE resource_plans.id IN ($1::INTEGER)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.097054, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00264s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.1063805, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT count(*) AS count_1 \nFROM websites \nWHERE websites.company_id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.1080048, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00167s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.133893, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745162.1413853, "level": "ERROR", "name": "api", "message": "Request failed: 'widget_position' is an invalid keyword argument for Website", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 59, in create\n    db_obj = self.model(**obj_in)\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'widget_position' is an invalid keyword argument for Website", "request_id": "a075a5b2-6e80-4eca-a2bf-fdc3d44252e4", "method": "POST", "path": "/api/v1/websites", "logger": "api", "environment": "development"}
{"timestamp": 1761745162.2872837, "level": "ERROR", "name": "app.middleware.error_handler", "message": "Unhandled Exception: 'widget_position' is an invalid keyword argument for Website", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 132, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 59, in create\n    db_obj = self.model(**obj_in)\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'widget_position' is an invalid keyword argument for Website", "path": "/api/v1/websites", "exception_type": "TypeError", "logger": "app.middleware.error_handler", "environment": "development"}
{"timestamp": 1761745190.9228265, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745192.703578, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745192.7049346, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745192.7060702, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745215.580947, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "b531ec0a-edeb-44b4-914d-0a994a71fafb", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761745215.6477804, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745215.6497998, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745215.655238, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745215.6573727, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745215.6666987, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745215.669989, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745215.6767802, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.7107346, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.7125642, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00192s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.7284093, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.733012, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00442s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.7498105, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_plans.id AS resource_plans_id, resource_plans.plan_name AS resource_plans_plan_name, resource_plans.plan_type AS resource_plans_plan_type, resource_plans.max_ai_models AS resource_plans_max_ai_models, resource_plans.max_users AS resource_plans_max_users, resource_plans.max_websites AS resource_plans_max_websites, resource_plans.max_monthly_requests AS resource_plans_max_monthly_requests, resource_plans.max_storage_gb AS resource_plans_max_storage_gb, resource_plans.max_training_hours AS resource_plans_max_training_hours, resource_plans.monthly_cost AS resource_plans_monthly_cost, resource_plans.yearly_cost AS resource_plans_yearly_cost, resource_plans.overage_cost_per_request AS resource_plans_overage_cost_per_request, resource_plans.overage_cost_per_gb AS resource_plans_overage_cost_per_gb, resource_plans.features AS resource_plans_features, resource_plans.is_active AS resource_plans_is_active, resource_plans.created_at AS resource_plans_created_at, resource_plans.updated_at AS resource_plans_updated_at \nFROM resource_plans \nWHERE resource_plans.id IN ($1::INTEGER)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.7520041, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00221s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.7633216, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT count(*) AS count_1 \nFROM websites \nWHERE websites.company_id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.766176, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00282s] (4,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.778639, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748891.7838125, "level": "ERROR", "name": "api", "message": "Request failed: 'widget_color' is an invalid keyword argument for Website", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 59, in create\n    db_obj = self.model(**obj_in)\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'widget_color' is an invalid keyword argument for Website", "request_id": "b531ec0a-edeb-44b4-914d-0a994a71fafb", "method": "POST", "path": "/api/v1/websites", "logger": "api", "environment": "development"}
{"timestamp": 1761745216.0043383, "level": "ERROR", "name": "app.middleware.error_handler", "message": "Unhandled Exception: 'widget_color' is an invalid keyword argument for Website", "exc_info": "Traceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 132, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 59, in create\n    db_obj = self.model(**obj_in)\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'widget_color' is an invalid keyword argument for Website", "path": "/api/v1/websites", "exception_type": "TypeError", "logger": "app.middleware.error_handler", "environment": "development"}
{"timestamp": 1761745571.8886213, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745577.269341, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745577.272437, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745577.275328, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745592.456345, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745719.4037035, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745719.407308, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745719.409564, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761745729.14252, "level": "INFO", "name": "api", "message": "Incoming Request: GET /docs", "request_id": "19787a94-c526-4e2f-b281-5bcd73895429", "method": "GET", "path": "/docs", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761745729.7218778, "level": "INFO", "name": "api", "message": "Incoming Request: GET /api/v1/openapi.json", "request_id": "489ad914-b34f-438f-8b56-7cd519ce7874", "method": "GET", "path": "/api/v1/openapi.json", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761749429.7445643, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "53f9a0bf-00d9-4097-a2e4-3fc940546955", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761749429.8208363, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749429.8412573, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749429.868305, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749429.8988764, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749429.9574628, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749429.971265, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749430.0129538, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749430.2227197, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749430.2351422, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.01211s] ('ahmed',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745753.3797216, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE company_users.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745753.5353093, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.15566s] (datetime.datetime(2025, 10, 29, 13, 49, 13, 374906), 4)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761745753.5766351, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761749475.1368332, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "b3dd4328-83f4-4eb1-8537-d51023bf9d3b", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761745880.7721539, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761747879.0841637, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761747879.0857303, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761747879.086765, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761747884.0527186, "level": "INFO", "name": "api", "message": "Incoming Request: GET /docs", "request_id": "72b50360-f268-4692-a4cb-e075c2ff82f9", "method": "GET", "path": "/docs", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761747884.4188917, "level": "INFO", "name": "api", "message": "Incoming Request: GET /api/v1/openapi.json", "request_id": "a26b5579-87d5-492a-82ce-79ea9bf1de25", "method": "GET", "path": "/api/v1/openapi.json", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761747917.3630812, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/auth/company/login", "request_id": "8f4bf8b0-c55d-4557-ad96-26bf8f7655e5", "method": "POST", "path": "/api/v1/auth/company/login", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761747917.6151285, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747917.6194708, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747917.6338549, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747917.6428435, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747917.6575458, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747917.6635761, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747917.6736727, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747917.758646, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.username = $1::VARCHAR AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747917.7613897, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00294s] ('demo_master',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747918.0952594, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE company_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE company_users.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747918.0983474, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00319s] (datetime.datetime(2025, 10, 29, 14, 25, 18, 92283), 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747918.1274095, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.5241966, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "f3394af9-1a85-404f-9d17-4da2a62c7e08", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761747971.5347967, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.5379386, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.5425491, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00466s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.5841777, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.5859716, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00226s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.6071382, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_plans.id AS resource_plans_id, resource_plans.plan_name AS resource_plans_plan_name, resource_plans.plan_type AS resource_plans_plan_type, resource_plans.max_ai_models AS resource_plans_max_ai_models, resource_plans.max_users AS resource_plans_max_users, resource_plans.max_websites AS resource_plans_max_websites, resource_plans.max_monthly_requests AS resource_plans_max_monthly_requests, resource_plans.max_storage_gb AS resource_plans_max_storage_gb, resource_plans.max_training_hours AS resource_plans_max_training_hours, resource_plans.monthly_cost AS resource_plans_monthly_cost, resource_plans.yearly_cost AS resource_plans_yearly_cost, resource_plans.overage_cost_per_request AS resource_plans_overage_cost_per_request, resource_plans.overage_cost_per_gb AS resource_plans_overage_cost_per_gb, resource_plans.features AS resource_plans_features, resource_plans.is_active AS resource_plans_is_active, resource_plans.created_at AS resource_plans_created_at, resource_plans.updated_at AS resource_plans_updated_at \nFROM resource_plans \nWHERE resource_plans.id IN ($1::INTEGER)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.61448, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00782s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.6427908, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT count(*) AS count_1 \nFROM websites \nWHERE websites.company_id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.6482086, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00555s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.6902173, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO websites (website_name, website_url, domain, description, widget_color, widget_size, widget_position, widget_icon, placeholder_text, show_powered_by, custom_css, auto_open_delay, enable_sound, enable_file_upload, allowed_file_types, widget_status, business_hours_enabled, business_hours, welcome_message, offline_message, domain_verified, verified_at, allowed_domains, widget_api_key, total_visitors, total_conversations, conversion_rate, embed_code, api_endpoint, webhook_url, is_active, company_id, primary_ai_model_id, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::BOOLEAN, $11::VARCHAR, $12::INTEGER, $13::BOOLEAN, $14::BOOLEAN, $15::JSON, $16::VARCHAR, $17::BOOLEAN, $18::JSON, $19::VARCHAR, $20::VARCHAR, $21::BOOLEAN, $22::TIMESTAMP WITHOUT TIME ZONE, $23::JSON, $24::VARCHAR, $25::INTEGER, $26::INTEGER, $27::INTEGER, $28::VARCHAR, $29::VARCHAR, $30::VARCHAR, $31::BOOLEAN, $32::INTEGER, $33::INTEGER, $34::TIMESTAMP WITH TIME ZONE) RETURNING websites.id, websites.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.6929715, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00308s] ('my test website', HttpUrl('https://example.com/'), 'example.com', 'string', '#0084ff', 'medium', 'bottom-right', None, 'Type your message...', True, None, None, True, False, '[]', 'active', False, '{}', 'string', 'string', False, None, '[]', None, 0, 0, None, '<script src=\"/widget.js\" data-widget-id=\"ZBX6O7mIzN5Nn5a0\"></script>', '/api/v1/chat/widget/1', None, True, 1, None, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.7043393, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761747971.708854, "level": "ERROR", "name": "api", "message": "Request failed: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: HttpUrl('https://example.com/') (expected str, got HttpUrl)\n[SQL: INSERT INTO websites (website_name, website_url, domain, description, widget_color, widget_size, widget_position, widget_icon, placeholder_text, show_powered_by, custom_css, auto_open_delay, enable_sound, enable_file_upload, allowed_file_types, widget_status, business_hours_enabled, business_hours, welcome_message, offline_message, domain_verified, verified_at, allowed_domains, widget_api_key, total_visitors, total_conversations, conversion_rate, embed_code, api_endpoint, webhook_url, is_active, company_id, primary_ai_model_id, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::BOOLEAN, $11::VARCHAR, $12::INTEGER, $13::BOOLEAN, $14::BOOLEAN, $15::JSON, $16::VARCHAR, $17::BOOLEAN, $18::JSON, $19::VARCHAR, $20::VARCHAR, $21::BOOLEAN, $22::TIMESTAMP WITHOUT TIME ZONE, $23::JSON, $24::VARCHAR, $25::INTEGER, $26::INTEGER, $27::INTEGER, $28::VARCHAR, $29::VARCHAR, $30::VARCHAR, $31::BOOLEAN, $32::INTEGER, $33::INTEGER, $34::TIMESTAMP WITH TIME ZONE) RETURNING websites.id, websites.created_at]\n[parameters: ('my test website', HttpUrl('https://example.com/'), 'example.com', 'string', '#0084ff', 'medium', 'bottom-right', None, 'Type your message...', True, None, None, True, False, '[]', 'active', False, '{}', 'string', 'string', False, None, '[]', None, 0, 0, None, '<script src=\"/widget.js\" data-widget-id=\"ZBX6O7mIzN5Nn5a0\"></script>', '/api/v1/chat/widget/1', None, True, 1, None, None)]\n(Background on this error at: https://sqlalche.me/e/20/dbapi)", "exc_info": "Traceback (most recent call last):\n  File \"asyncpg/protocol/prepared_stmt.pyx\", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg\n  File \"asyncpg/protocol/codecs/base.pyx\", line 227, in asyncpg.protocol.protocol.Codec.encode\n  File \"asyncpg/protocol/codecs/base.pyx\", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar\n  File \"asyncpg/pgproto/./codecs/text.pyx\", line 29, in asyncpg.pgproto.pgproto.text_encode\n  File \"asyncpg/pgproto/./codecs/text.pyx\", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size\nTypeError: expected str, got HttpUrl\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 557, in _prepare_and_execute\n    self._rows = await prepared_stmt.fetch(*parameters)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/prepared_stmt.py\", line 176, in fetch\n    data = await self.__bind_execute(args, 0, timeout)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/prepared_stmt.py\", line 241, in __bind_execute\n    data, status, _ = await self.__do_execute(\n                      ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/prepared_stmt.py\", line 230, in __do_execute\n    return await executor(protocol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"asyncpg/protocol/protocol.pyx\", line 186, in bind_execute\n  File \"asyncpg/protocol/prepared_stmt.pyx\", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg\nasyncpg.exceptions.DataError: invalid input for query argument $2: HttpUrl('https://example.com/') (expected str, got HttpUrl)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: HttpUrl('https://example.com/') (expected str, got HttpUrl)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 61, in create\n    await self.db.flush()\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 802, in flush\n    await greenlet_spawn(self.sync_session.flush, objects=objects)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 192, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: HttpUrl('https://example.com/') (expected str, got HttpUrl)\n[SQL: INSERT INTO websites (website_name, website_url, domain, description, widget_color, widget_size, widget_position, widget_icon, placeholder_text, show_powered_by, custom_css, auto_open_delay, enable_sound, enable_file_upload, allowed_file_types, widget_status, business_hours_enabled, business_hours, welcome_message, offline_message, domain_verified, verified_at, allowed_domains, widget_api_key, total_visitors, total_conversations, conversion_rate, embed_code, api_endpoint, webhook_url, is_active, company_id, primary_ai_model_id, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::BOOLEAN, $11::VARCHAR, $12::INTEGER, $13::BOOLEAN, $14::BOOLEAN, $15::JSON, $16::VARCHAR, $17::BOOLEAN, $18::JSON, $19::VARCHAR, $20::VARCHAR, $21::BOOLEAN, $22::TIMESTAMP WITHOUT TIME ZONE, $23::JSON, $24::VARCHAR, $25::INTEGER, $26::INTEGER, $27::INTEGER, $28::VARCHAR, $29::VARCHAR, $30::VARCHAR, $31::BOOLEAN, $32::INTEGER, $33::INTEGER, $34::TIMESTAMP WITH TIME ZONE) RETURNING websites.id, websites.created_at]\n[parameters: ('my test website', HttpUrl('https://example.com/'), 'example.com', 'string', '#0084ff', 'medium', 'bottom-right', None, 'Type your message...', True, None, None, True, False, '[]', 'active', False, '{}', 'string', 'string', False, None, '[]', None, 0, 0, None, '<script src=\"/widget.js\" data-widget-id=\"ZBX6O7mIzN5Nn5a0\"></script>', '/api/v1/chat/widget/1', None, True, 1, None, None)]\n(Background on this error at: https://sqlalche.me/e/20/dbapi)", "request_id": "f3394af9-1a85-404f-9d17-4da2a62c7e08", "method": "POST", "path": "/api/v1/websites", "logger": "api", "environment": "development"}
{"timestamp": 1761747971.8285034, "level": "ERROR", "name": "app.middleware.error_handler", "message": "Unhandled Exception: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: HttpUrl('https://example.com/') (expected str, got HttpUrl)\n[SQL: INSERT INTO websites (website_name, website_url, domain, description, widget_color, widget_size, widget_position, widget_icon, placeholder_text, show_powered_by, custom_css, auto_open_delay, enable_sound, enable_file_upload, allowed_file_types, widget_status, business_hours_enabled, business_hours, welcome_message, offline_message, domain_verified, verified_at, allowed_domains, widget_api_key, total_visitors, total_conversations, conversion_rate, embed_code, api_endpoint, webhook_url, is_active, company_id, primary_ai_model_id, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::BOOLEAN, $11::VARCHAR, $12::INTEGER, $13::BOOLEAN, $14::BOOLEAN, $15::JSON, $16::VARCHAR, $17::BOOLEAN, $18::JSON, $19::VARCHAR, $20::VARCHAR, $21::BOOLEAN, $22::TIMESTAMP WITHOUT TIME ZONE, $23::JSON, $24::VARCHAR, $25::INTEGER, $26::INTEGER, $27::INTEGER, $28::VARCHAR, $29::VARCHAR, $30::VARCHAR, $31::BOOLEAN, $32::INTEGER, $33::INTEGER, $34::TIMESTAMP WITH TIME ZONE) RETURNING websites.id, websites.created_at]\n[parameters: ('my test website', HttpUrl('https://example.com/'), 'example.com', 'string', '#0084ff', 'medium', 'bottom-right', None, 'Type your message...', True, None, None, True, False, '[]', 'active', False, '{}', 'string', 'string', False, None, '[]', None, 0, 0, None, '<script src=\"/widget.js\" data-widget-id=\"ZBX6O7mIzN5Nn5a0\"></script>', '/api/v1/chat/widget/1', None, True, 1, None, None)]\n(Background on this error at: https://sqlalche.me/e/20/dbapi)", "exc_info": "Traceback (most recent call last):\n  File \"asyncpg/protocol/prepared_stmt.pyx\", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg\n  File \"asyncpg/protocol/codecs/base.pyx\", line 227, in asyncpg.protocol.protocol.Codec.encode\n  File \"asyncpg/protocol/codecs/base.pyx\", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar\n  File \"asyncpg/pgproto/./codecs/text.pyx\", line 29, in asyncpg.pgproto.pgproto.text_encode\n  File \"asyncpg/pgproto/./codecs/text.pyx\", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size\nTypeError: expected str, got HttpUrl\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 557, in _prepare_and_execute\n    self._rows = await prepared_stmt.fetch(*parameters)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/prepared_stmt.py\", line 176, in fetch\n    data = await self.__bind_execute(args, 0, timeout)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/prepared_stmt.py\", line 241, in __bind_execute\n    data, status, _ = await self.__do_execute(\n                      ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/asyncpg/prepared_stmt.py\", line 230, in __do_execute\n    return await executor(protocol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"asyncpg/protocol/protocol.pyx\", line 186, in bind_execute\n  File \"asyncpg/protocol/prepared_stmt.pyx\", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg\nasyncpg.exceptions.DataError: invalid input for query argument $2: HttpUrl('https://example.com/') (expected str, got HttpUrl)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: HttpUrl('https://example.com/') (expected str, got HttpUrl)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 132, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/middleware/request_logging.py\", line 35, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 91, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 146, in simple_response\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/api/v1/websites.py\", line 62, in create_website\n    website = await service.create_website(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/services/website_service.py\", line 97, in create_website\n    website = await self.website_repo.create(website_data)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/d/chatbot/app/repositories/base_repository.py\", line 61, in create\n    await self.db.flush()\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 802, in flush\n    await greenlet_spawn(self.sync_session.flush, objects=objects)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 192, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 591, in execute\n    self._adapt_connection.await_(\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 125, in await_only\n    return current.driver.switch(awaitable)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 185, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 569, in _prepare_and_execute\n    self._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 520, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n  File \"/home/osama_mohamed/miniconda3/envs/chatbot/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 808, in _handle_exception\n    raise translated_error from error\nsqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: HttpUrl('https://example.com/') (expected str, got HttpUrl)\n[SQL: INSERT INTO websites (website_name, website_url, domain, description, widget_color, widget_size, widget_position, widget_icon, placeholder_text, show_powered_by, custom_css, auto_open_delay, enable_sound, enable_file_upload, allowed_file_types, widget_status, business_hours_enabled, business_hours, welcome_message, offline_message, domain_verified, verified_at, allowed_domains, widget_api_key, total_visitors, total_conversations, conversion_rate, embed_code, api_endpoint, webhook_url, is_active, company_id, primary_ai_model_id, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::BOOLEAN, $11::VARCHAR, $12::INTEGER, $13::BOOLEAN, $14::BOOLEAN, $15::JSON, $16::VARCHAR, $17::BOOLEAN, $18::JSON, $19::VARCHAR, $20::VARCHAR, $21::BOOLEAN, $22::TIMESTAMP WITHOUT TIME ZONE, $23::JSON, $24::VARCHAR, $25::INTEGER, $26::INTEGER, $27::INTEGER, $28::VARCHAR, $29::VARCHAR, $30::VARCHAR, $31::BOOLEAN, $32::INTEGER, $33::INTEGER, $34::TIMESTAMP WITH TIME ZONE) RETURNING websites.id, websites.created_at]\n[parameters: ('my test website', HttpUrl('https://example.com/'), 'example.com', 'string', '#0084ff', 'medium', 'bottom-right', None, 'Type your message...', True, None, None, True, False, '[]', 'active', False, '{}', 'string', 'string', False, None, '[]', None, 0, 0, None, '<script src=\"/widget.js\" data-widget-id=\"ZBX6O7mIzN5Nn5a0\"></script>', '/api/v1/chat/widget/1', None, True, 1, None, None)]\n(Background on this error at: https://sqlalche.me/e/20/dbapi)", "path": "/api/v1/websites", "exception_type": "DBAPIError", "logger": "app.middleware.error_handler", "environment": "development"}
{"timestamp": 1761748068.644054, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "c9ba9386-2da7-4b35-b4e3-8ec2ccb5f136", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761748068.674799, "level": "WARNING", "name": "app.middleware.error_handler", "message": "Validation Error: /api/v1/websites", "errors": [{"field": "body.56", "message": "JSON decode error", "type": "json_invalid"}], "logger": "app.middleware.error_handler", "environment": "development"}
{"timestamp": 1761751816.5904837, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751822.3566852, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751822.3593976, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751822.3618023, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751849.8781898, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751852.4306035, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751852.4336858, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751852.4361331, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761748263.3824382, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751947.430246, "level": "INFO", "name": "app.main", "message": "Starting Chatbot SaaS Platform v1.0.0", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751947.4345725, "level": "INFO", "name": "app.main", "message": "Environment: development", "logger": "app.main", "environment": "development"}
{"timestamp": 1761751947.4378731, "level": "INFO", "name": "app.main", "message": "Application startup complete", "logger": "app.main", "environment": "development"}
{"timestamp": 1761748332.935379, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "fd5f5a58-53b7-4dcd-961d-d4f3ee50f554", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761748332.9404595, "level": "WARNING", "name": "app.middleware.error_handler", "message": "Validation Error: /api/v1/websites", "errors": [{"field": "body.56", "message": "JSON decode error", "type": "json_invalid"}], "logger": "app.middleware.error_handler", "environment": "development"}
{"timestamp": 1761748422.6084719, "level": "INFO", "name": "api", "message": "Incoming Request: POST /api/v1/websites", "request_id": "72a32d0e-f4ac-43c6-89f3-d850d8028b6f", "method": "POST", "path": "/api/v1/websites", "query_params": "", "client_host": "127.0.0.1", "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36", "logger": "api", "environment": "development"}
{"timestamp": 1761748422.9414833, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748422.9449625, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748422.9759212, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "select current_schema()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748422.979525, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748422.9928408, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748422.996377, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.012097, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.4978697, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT company_users.username, company_users.email, company_users.password_hash, company_users.first_name, company_users.last_name, company_users.role, company_users.is_master_user, company_users.custom_permissions, company_users.last_login_at, company_users.failed_login_attempts, company_users.locked_until, company_users.password_changed_at, company_users.company_id, company_users.created_by_id, company_users.id, company_users.is_active, company_users.created_at, company_users.updated_at \nFROM company_users \nWHERE company_users.id = $1::INTEGER AND company_users.is_active = true", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.5003352, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00256s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.5599303, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT client_companies.company_name, client_companies.company_email, client_companies.contact_person, client_companies.phone, client_companies.address, client_companies.industry, client_companies.company_size, client_companies.tax_id, client_companies.account_status, client_companies.suspension_reason, client_companies.admin_id, client_companies.resource_plan_id, client_companies.id, client_companies.is_active, client_companies.created_at, client_companies.updated_at \nFROM client_companies \nWHERE client_companies.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.5639355, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00406s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.5838673, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_plans.id AS resource_plans_id, resource_plans.plan_name AS resource_plans_plan_name, resource_plans.plan_type AS resource_plans_plan_type, resource_plans.max_ai_models AS resource_plans_max_ai_models, resource_plans.max_users AS resource_plans_max_users, resource_plans.max_websites AS resource_plans_max_websites, resource_plans.max_monthly_requests AS resource_plans_max_monthly_requests, resource_plans.max_storage_gb AS resource_plans_max_storage_gb, resource_plans.max_training_hours AS resource_plans_max_training_hours, resource_plans.monthly_cost AS resource_plans_monthly_cost, resource_plans.yearly_cost AS resource_plans_yearly_cost, resource_plans.overage_cost_per_request AS resource_plans_overage_cost_per_request, resource_plans.overage_cost_per_gb AS resource_plans_overage_cost_per_gb, resource_plans.features AS resource_plans_features, resource_plans.is_active AS resource_plans_is_active, resource_plans.created_at AS resource_plans_created_at, resource_plans.updated_at AS resource_plans_updated_at \nFROM resource_plans \nWHERE resource_plans.id IN ($1::INTEGER)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.5862746, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00266s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.6094344, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT count(*) AS count_1 \nFROM websites \nWHERE websites.company_id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.6133661, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00396s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.6328979, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT websites.website_name, websites.website_url, websites.domain, websites.description, websites.widget_color, websites.widget_size, websites.widget_position, websites.widget_icon, websites.placeholder_text, websites.show_powered_by, websites.custom_css, websites.auto_open_delay, websites.enable_sound, websites.enable_file_upload, websites.allowed_file_types, websites.widget_status, websites.business_hours_enabled, websites.business_hours, websites.welcome_message, websites.offline_message, websites.domain_verified, websites.verified_at, websites.allowed_domains, websites.widget_api_key, websites.total_visitors, websites.total_conversations, websites.conversion_rate, websites.embed_code, websites.api_endpoint, websites.webhook_url, websites.is_active, websites.company_id, websites.primary_ai_model_id, websites.id, websites.created_at, websites.updated_at \nFROM websites \nWHERE websites.domain = $1::VARCHAR", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.6354191, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00278s] ('example.com',)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.664421, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "INSERT INTO websites (website_name, website_url, domain, description, widget_color, widget_size, widget_position, widget_icon, placeholder_text, show_powered_by, custom_css, auto_open_delay, enable_sound, enable_file_upload, allowed_file_types, widget_status, business_hours_enabled, business_hours, welcome_message, offline_message, domain_verified, verified_at, allowed_domains, widget_api_key, total_visitors, total_conversations, conversion_rate, embed_code, api_endpoint, webhook_url, is_active, company_id, primary_ai_model_id, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::BOOLEAN, $11::VARCHAR, $12::INTEGER, $13::BOOLEAN, $14::BOOLEAN, $15::JSON, $16::VARCHAR, $17::BOOLEAN, $18::JSON, $19::VARCHAR, $20::VARCHAR, $21::BOOLEAN, $22::TIMESTAMP WITHOUT TIME ZONE, $23::JSON, $24::VARCHAR, $25::INTEGER, $26::INTEGER, $27::INTEGER, $28::VARCHAR, $29::VARCHAR, $30::VARCHAR, $31::BOOLEAN, $32::INTEGER, $33::INTEGER, $34::TIMESTAMP WITH TIME ZONE) RETURNING websites.id, websites.created_at", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.6666505, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00239s] ('my test website', 'https://example.com/', 'example.com', 'Test website', '#0084ff', 'medium', 'bottom-right', None, 'Type your message...', True, None, None, True, False, '[]', 'active', False, '{}', 'string', 'string', False, None, '[]', 'wgt_gGm35ZeB1rgCDsKVwbiF88c7AZidBCiU', 0, 0, None, \"<script>\\n  (function(w,d,s,o,f,js,fjs){\\n    w['ChatbotWidget']=o;w[o]=w[o]||function(){(w[o].q=w[o].q||[]).push(arguments)};\\n    js=d.createElemen ... (125 characters truncated) ... ment,'script','chatbot','/widget.js'));\\n  chatbot('init', {\\n    apiKey: 'wgt_gGm35ZeB1rgCDsKVwbiF88c7AZidBCiU',\\n    companyId: 1\\n  });\\n</script>\", '/api/v1/chat/widget/wgt_gGm35ZeB1rgCDsKVwbiF88c7AZidBCiU', None, True, 1, None, None)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.703944, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT websites.website_name, websites.website_url, websites.domain, websites.description, websites.widget_color, websites.widget_size, websites.widget_position, websites.widget_icon, websites.placeholder_text, websites.show_powered_by, websites.custom_css, websites.auto_open_delay, websites.enable_sound, websites.enable_file_upload, websites.allowed_file_types, websites.widget_status, websites.business_hours_enabled, websites.business_hours, websites.welcome_message, websites.offline_message, websites.domain_verified, websites.verified_at, websites.allowed_domains, websites.widget_api_key, websites.total_visitors, websites.total_conversations, websites.conversion_rate, websites.embed_code, websites.api_endpoint, websites.webhook_url, websites.is_active, websites.company_id, websites.primary_ai_model_id, websites.id, websites.created_at, websites.updated_at \nFROM websites \nWHERE websites.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.7055502, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00169s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.7113824, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT resource_allocations.company_id, resource_allocations.plan_id, resource_allocations.current_ai_models, resource_allocations.current_users, resource_allocations.current_websites, resource_allocations.current_monthly_requests, resource_allocations.current_storage_gb, resource_allocations.billing_period_start, resource_allocations.billing_period_end, resource_allocations.overage_requests, resource_allocations.overage_storage_gb, resource_allocations.id, resource_allocations.is_active, resource_allocations.created_at, resource_allocations.updated_at \nFROM resource_allocations \nWHERE resource_allocations.company_id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.7128034, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00146s] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.7228963, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT count(*) AS count_1 \nFROM websites \nWHERE websites.company_id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.7256205, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 0.1161s ago] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.7309806, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "UPDATE resource_allocations SET current_websites=$1::INTEGER, updated_at=now() WHERE resource_allocations.id = $2::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.7338483, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[generated in 0.00296s] (1, 1)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.7443533, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.861166, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.8633723, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "SELECT websites.website_name, websites.website_url, websites.domain, websites.description, websites.widget_color, websites.widget_size, websites.widget_position, websites.widget_icon, websites.placeholder_text, websites.show_powered_by, websites.custom_css, websites.auto_open_delay, websites.enable_sound, websites.enable_file_upload, websites.allowed_file_types, websites.widget_status, websites.business_hours_enabled, websites.business_hours, websites.welcome_message, websites.offline_message, websites.domain_verified, websites.verified_at, websites.allowed_domains, websites.widget_api_key, websites.total_visitors, websites.total_conversations, websites.conversion_rate, websites.embed_code, websites.api_endpoint, websites.webhook_url, websites.is_active, websites.company_id, websites.primary_ai_model_id, websites.id, websites.created_at, websites.updated_at \nFROM websites \nWHERE websites.id = $1::INTEGER", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.8650992, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "[cached since 0.1612s ago] (1,)", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748423.8734305, "level": "WARNING", "name": "api", "message": "Slow request detected: 1.2657s", "request_id": "72a32d0e-f4ac-43c6-89f3-d850d8028b6f", "method": "POST", "path": "/api/v1/websites", "process_time": 1.2657499313354492, "logger": "api", "environment": "development"}
{"timestamp": 1761748423.8766892, "level": "INFO", "name": "sqlalchemy.engine.Engine", "message": "COMMIT", "logger": "sqlalchemy.engine.Engine", "environment": "development"}
{"timestamp": 1761748525.6331105, "level": "INFO", "name": "app.main", "message": "Application shutting down", "logger": "app.main", "environment": "development"}
